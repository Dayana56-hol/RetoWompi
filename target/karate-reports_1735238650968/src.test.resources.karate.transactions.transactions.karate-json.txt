{"failedCount":2,"prefixedPath":"src\/test\/resources\/karate\/transactions\/transactions.feature","packageQualifiedName":"src.test.resources.karate.transactions.transactions","loopIndex":-1,"relativePath":"src\/test\/resources\/karate\/transactions\/transactions.feature","scenarioResults":[{"sectionIndex":1,"stepResults":[{"result":{"nanos":916400,"millis":0.9164,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url api.urlBase"}},{"result":{"nanos":54787700,"millis":54.7877,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def keys = read('classpath:karate\/common\/keys.json')"}},{"result":{"nanos":1474100,"millis":1.4741,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def bodyRequest = read('classpath:karate\/transactions\/data\/transactions_body.json')"}},{"result":{"nanos":3997800,"millis":3.9978,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def paymentMethod = read('classpath:karate\/transactions\/data\/payment_method.json')"}},{"result":{"nanos":1258200,"millis":1.2582,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def customerData = read('classpath:karate\/transactions\/data\/customer_data.json')"}},{"result":{"nanos":660500,"millis":0.6605,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def publicKey = keys.public_key"}},{"result":{"nanos":489600,"millis":0.4896,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def integrityKey = keys.integrity_key"}},{"result":{"nanos":480100,"millis":0.4801,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def authToken = 'Bearer ' + publicKey"}},{"result":{"nanos":489600,"millis":0.4896,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def transactionPath = path.transaction"}},{"result":{"nanos":967340000,"millis":967.34,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"def tokens = call read('classpath:karate\/merchants\/merchants.feature')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:karate\/merchants\/merchants.feature","packageQualifiedName":"karate.merchants.merchants","loopIndex":-1,"relativePath":"karate\/merchants\/merchants.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":515500,"millis":0.5155,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url api.urlBase"}},{"result":{"nanos":1161500,"millis":1.1615,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def keys = read('classpath:karate\/common\/keys.json')"},"stepLog":"13:38:28.653 over-writing existing variable 'keys' with new value: read('classpath:karate\/common\/keys.json')\n"},{"result":{"nanos":430700,"millis":0.4307,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def publicKey = keys.public_key"},"stepLog":"13:38:28.654 over-writing existing variable 'publicKey' with new value: keys.public_key\n"},{"result":{"nanos":547000,"millis":0.547,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def merchantsPath = path.merchants"}},{"result":{"nanos":10324800,"millis":10.3248,"status":"passed"},"step":{"line":11,"prefix":"Given","index":0,"text":"path merchantsPath, publicKey"}},{"result":{"nanos":932826900,"millis":932.8269,"status":"passed"},"step":{"line":12,"prefix":"When","index":1,"text":"method GET"},"stepLog":"13:38:28.757 request:\n1 > GET https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/merchants\/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\n1 > Host: api-sandbox.co.uat.wompi.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.19)\n1 > Accept-Encoding: gzip,deflate\n\n\n13:38:29.597 response time in milliseconds: 835\n1 < 200\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Connection: keep-alive\n1 < Date: Thu, 26 Dec 2024 18:38:30 GMT\n1 < apigw-requestid: DaZaGieQIAMEJhg=\n1 < vary: Origin\n1 < vary: accept-encoding\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 5dd2304368effbad5413134075a82ff0.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MIA3-C3\n1 < X-Amz-Cf-Id: LVPV7KU9_ieS9_a128XNShUvIXxzDLuYCt9x-Lcw3i_BmKLwDVndSg==\n{\"data\":{\"public_key\":\"pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\",\"legal_id\":\"1069879849\",\"contact_name\":\"Alejandra Pruebas Sandbox UAT\",\"logo_url\":null,\"active\":true,\"accepted_payment_methods\":[\"NEQUI\",\"PSE\",\"BANCOLOMBIA_TRANSFER\",\"CARD\",\"BANCOLOMBIA_COLLECT\",\"BANCOLOMBIA_QR\",\"DAVIPLATA\",\"BANCOLOMBIA_BNPL\",\"SU_PLUS\"],\"fraud_javascript_key\":null,\"payment_methods\":[{\"name\":\"BANCOLOMBIA_BNPL\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_BNPL_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_COLLECT\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_COLLECT_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_QR\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_QR_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_TRANSFER\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_TRANSFER_SANDBOX\"}]},{\"name\":\"CARD\",\"payment_processors\":[{\"name\":\"CARD_SANDBOX\"}]},{\"name\":\"DAVIPLATA\",\"payment_processors\":[{\"name\":\"DAVIPLATA_SANDBOX\"}]},{\"name\":\"NEQUI\",\"payment_processors\":[{\"name\":\"NEQUI_SANDBOX\"}]},{\"name\":\"PSE\",\"payment_processors\":[{\"name\":\"PSE_SANDBOX\"}]},{\"name\":\"SU_PLUS\",\"payment_processors\":[{\"name\":\"SU_PLUS_SANDBOX\"}]}],\"fraud_groups\":[],\"name\":\"Alejandra Pruebas Sandbox UAT\",\"phone_number\":\"+573000000000\",\"id\":5113,\"legal_name\":\"Alejandra Pruebas Sandbox UAT\",\"presigned_personal_data_auth\":{\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6Mzc1LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLWFkbWluaXN0cmFjaW9uLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiOTVkYzcwN2M0M2UxYmViMDAwMDUyZDNkNWJhZThhMDAiLCJqaXQiOiIxNzM1MjM4MzEwLTg4NTU4IiwiZW1haWwiOiIifQ.RyF2mz6pujWDRidOfAkU_Jd5TmOPCy37Q5yr0PElLA8\",\"permalink\":\"https:\\\/\\\/wompi.com\\\/assets\\\/downloadble\\\/autorizacion-administracion-datos-personales.pdf\",\"type\":\"PERSONAL_DATA_AUTH\"},\"presigned_acceptance\":{\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3MzUyMzgzMTAtMjY1NTkiLCJlbWFpbCI6IiIsImV4cCI6MTczNTI0MTkxMH0.3WJVL3-v2X-ZukEJJgwDijymB7WXRXNOWke_Zc7lAPk\",\"permalink\":\"https:\\\/\\\/wompi.com\\\/assets\\\/downloadble\\\/reglamento-Usuarios-Colombia.pdf\",\"type\":\"END_USER_POLICY\"},\"email\":\"pruebasensandbox@yopmail.com\",\"accepted_currencies\":[\"COP\"],\"legal_id_type\":\"CC\"},\"meta\":{}}\n"},{"result":{"nanos":18300,"millis":0.0183,"status":"passed"},"step":{"line":13,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":9620400,"millis":9.6204,"status":"passed"},"step":{"line":14,"prefix":"And","index":3,"text":"match response.data.presigned_acceptance.acceptance_token == '#string'"}},{"result":{"nanos":297800,"millis":0.2978,"status":"passed"},"step":{"line":15,"prefix":"And","index":4,"text":"match response.data.presigned_personal_data_auth.acceptance_token == '#string'"}}],"executorName":"main","line":10,"name":"Obtener tokens","description":"","durationMillis":955.7429,"startTime":1735238308652,"failed":false,"refId":"[1:10]","endTime":1735238309609,"exampleIndex":-1}],"callDepth":1,"name":"Obtener los tokens de aceptación","description":"","resultDate":"2024-12-26 01:38:31 p. m.","durationMillis":955.7429,"passedCount":1}]},{"result":{"nanos":5024800,"millis":5.0248,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"def createSignature = Java.type('karate.utils.Generate')"}},{"result":{"nanos":1482100,"millis":1.4821,"status":"passed"},"step":{"line":45,"prefix":"*","index":0,"text":"def reference = createSignature.generarCodigo()"}},{"result":{"nanos":12499600,"millis":12.4996,"status":"passed"},"step":{"line":46,"prefix":"*","index":1,"text":"def signature = createSignature.generateSHA256Hash(reference,150000,'COP',integrityKey)"}},{"result":{"nanos":1673700,"millis":1.6737,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"set bodyRequest.amount_in_cents = 150000"}},{"result":{"nanos":413900,"millis":0.4139,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"set bodyRequest.currency = 'COP'"}},{"result":{"nanos":89700,"millis":0.0897,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"set bodyRequest.reference = reference"}},{"result":{"nanos":78100,"millis":0.0781,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"set bodyRequest.signature = signature"}},{"result":{"nanos":1185100,"millis":1.1851,"status":"passed"},"step":{"line":51,"prefix":"*","index":6,"text":"set bodyRequest.customer_data = customerData.customer_data"}},{"result":{"nanos":472200,"millis":0.4722,"status":"passed"},"step":{"line":52,"prefix":"*","index":7,"text":"set bodyRequest.payment_method = paymentMethod.BANCOLOMBIA_QR"}},{"result":{"nanos":637500,"millis":0.6375,"status":"passed"},"step":{"line":53,"prefix":"Given","index":8,"text":"path transactionPath"}},{"result":{"nanos":55300,"millis":0.0553,"status":"passed"},"step":{"line":54,"prefix":"And","index":9,"text":"header Authorization = authToken"}},{"result":{"nanos":11000,"millis":0.011,"status":"passed"},"step":{"line":55,"prefix":"And","index":10,"text":"request bodyRequest"}},{"result":{"nanos":709018400,"millis":709.0184,"status":"passed"},"step":{"line":56,"prefix":"When","index":11,"text":"method POST"},"stepLog":"13:38:29.670 request:\n1 > POST https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions\n1 > Authorization: Bearer pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 1163\n1 > Host: api-sandbox.co.uat.wompi.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.19)\n1 > Accept-Encoding: gzip,deflate\n{\"reference\":\"sk8-lMyB-6mDg-GTvG\",\"amount_in_cents\":150000,\"signature\":\"535eedec9ea2305fd16a0f7b090d43ad185e4edf28bef73765da699e8db501bb\",\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3MzUxNjA1MjktNjYzMzgiLCJlbWFpbCI6IiIsImV4cCI6MTczNTE2NDEyOX0.TJACdrIMVUBzXX85sodEWtTWiTvKwVz4tF4SaxeRIHI\",\"customer_email\":\"example@wompi.co\",\"customer_data\":{\"legal_id\":\"1234567890\",\"full_name\":\"Juan Alfonso Pérez Rodríguez\",\"phone_number\":\"573307654321\",\"legal_id_type\":\"CC\"},\"currency\":\"COP\",\"accept_personal_auth\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6Mzc1LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLWFkbWluaXN0cmFjaW9uLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiOTVkYzcwN2M0M2UxYmViMDAwMDUyZDNkNWJhZThhMDAiLCJqaXQiOiIxNzM1MTYwNTI5LTMyNjIyIiwiZW1haWwiOiIifQ.QjtNF_4v7CzQebL7PaSRKd5IXJM51KIDwcjev_93V1k\",\"payment_method\":{\"payment_description\":\"Pago a Tienda Wompi\",\"type\":\"BANCOLOMBIA_QR\",\"sandbox_status\":\"APPROVED\"}}\n\n13:38:30.342 response time in milliseconds: 672\n1 < 422\n1 < Content-Type: application\/json\n1 < Content-Length: 116\n1 < Connection: keep-alive\n1 < Date: Thu, 26 Dec 2024 18:38:31 GMT\n1 < vary: Origin\n1 < apigw-requestid: DaZaLhBAIAMEb2w=\n1 < X-Cache: Error from cloudfront\n1 < Via: 1.1 dcccf6c408219d8b851fcd12a0068cea.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MIA3-C3\n1 < X-Amz-Cf-Id: vBEcQuHoKt3GWyta1Vw56HqG1MZXd6KPLSdKFrNDAhL0YRvkOBwFnQ==\n{\"error\":{\"messages\":{\"acceptance_token\":[\"El token de aceptación ya fue usado\"]},\"type\":\"INPUT_VALIDATION_ERROR\"}}\n"},{"result":{"nanos":96500,"errorMessage":"status code was: 422, expected: 201, response time in milliseconds: 672, url: https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions, response: \n{\"error\":{\"type\":\"INPUT_VALIDATION_ERROR\",\"messages\":{\"acceptance_token\":[\"El token de aceptación ya fue usado\"]}}}\nsrc\/test\/resources\/karate\/transactions\/transactions.feature:57","millis":0.0965,"status":"failed"},"step":{"line":57,"prefix":"Then","index":12,"text":"status 201"},"stepLog":"13:38:30.343 src\/test\/resources\/karate\/transactions\/transactions.feature:57\nThen status 201\nstatus code was: 422, expected: 201, response time in milliseconds: 672, url: https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions, response: \n{\"error\":{\"type\":\"INPUT_VALIDATION_ERROR\",\"messages\":{\"acceptance_token\":[\"El token de aceptación ya fue usado\"]}}}\nsrc\/test\/resources\/karate\/transactions\/transactions.feature:57\n"}],"line":60,"description":"","durationMillis":1764.6319,"failed":true,"error":"status code was: 422, expected: 201, response time in milliseconds: 672, url: https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions, response: \n{\"error\":{\"type\":\"INPUT_VALIDATION_ERROR\",\"messages\":{\"acceptance_token\":[\"El token de aceptación ya fue usado\"]}}}\nsrc\/test\/resources\/karate\/transactions\/transactions.feature:57","executorName":"main","name":"Transaccion fallida por token ya usados","startTime":1735238306665,"refId":"[2.1:60]","endTime":1735238310343,"exampleData":{"amount":"150000","currency":"'COP'","reference":"reference","integrity":"integrityKey","paymentMethod":"BANCOLOMBIA_QR"},"exampleIndex":0},{"sectionIndex":1,"stepResults":[{"result":{"nanos":180800,"millis":0.1808,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url api.urlBase"}},{"result":{"nanos":1566300,"millis":1.5663,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def keys = read('classpath:karate\/common\/keys.json')"}},{"result":{"nanos":813400,"millis":0.8134,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def bodyRequest = read('classpath:karate\/transactions\/data\/transactions_body.json')"}},{"result":{"nanos":649300,"millis":0.6493,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def paymentMethod = read('classpath:karate\/transactions\/data\/payment_method.json')"}},{"result":{"nanos":605300,"millis":0.6053,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def customerData = read('classpath:karate\/transactions\/data\/customer_data.json')"}},{"result":{"nanos":191300,"millis":0.1913,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def publicKey = keys.public_key"}},{"result":{"nanos":160600,"millis":0.1606,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def integrityKey = keys.integrity_key"}},{"result":{"nanos":154400,"millis":0.1544,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def authToken = 'Bearer ' + publicKey"}},{"result":{"nanos":144900,"millis":0.1449,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def transactionPath = path.transaction"}},{"result":{"nanos":499055900,"millis":499.0559,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"def tokens = call read('classpath:karate\/merchants\/merchants.feature')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:karate\/merchants\/merchants.feature","packageQualifiedName":"karate.merchants.merchants","loopIndex":-1,"relativePath":"karate\/merchants\/merchants.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":285300,"millis":0.2853,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url api.urlBase"}},{"result":{"nanos":1377600,"millis":1.3776,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def keys = read('classpath:karate\/common\/keys.json')"},"stepLog":"13:38:30.364 over-writing existing variable 'keys' with new value: read('classpath:karate\/common\/keys.json')\n"},{"result":{"nanos":502700,"millis":0.5027,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def publicKey = keys.public_key"},"stepLog":"13:38:30.366 over-writing existing variable 'publicKey' with new value: keys.public_key\n"},{"result":{"nanos":239100,"millis":0.2391,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def merchantsPath = path.merchants"}},{"result":{"nanos":281400,"millis":0.2814,"status":"passed"},"step":{"line":11,"prefix":"Given","index":0,"text":"path merchantsPath, publicKey"}},{"result":{"nanos":488015300,"millis":488.0153,"status":"passed"},"step":{"line":12,"prefix":"When","index":1,"text":"method GET"},"stepLog":"13:38:30.368 request:\n1 > GET https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/merchants\/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\n1 > Host: api-sandbox.co.uat.wompi.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.19)\n1 > Accept-Encoding: gzip,deflate\n\n\n13:38:30.854 response time in milliseconds: 485\n1 < 200\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Connection: keep-alive\n1 < Date: Thu, 26 Dec 2024 18:38:32 GMT\n1 < apigw-requestid: DaZaTiWPIAMEbqA=\n1 < vary: Origin\n1 < vary: accept-encoding\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 6c9274205f681e6532f5f293414b8d2e.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MIA3-C3\n1 < X-Amz-Cf-Id: eCKNkLlD4wvHXKYENhh-E99ScDlKc6f_hV3NxsyibQeu_UpijY6ckg==\n{\"data\":{\"public_key\":\"pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\",\"legal_id\":\"1069879849\",\"contact_name\":\"Alejandra Pruebas Sandbox UAT\",\"logo_url\":null,\"active\":true,\"accepted_payment_methods\":[\"NEQUI\",\"PSE\",\"BANCOLOMBIA_TRANSFER\",\"CARD\",\"BANCOLOMBIA_COLLECT\",\"BANCOLOMBIA_QR\",\"DAVIPLATA\",\"BANCOLOMBIA_BNPL\",\"SU_PLUS\"],\"fraud_javascript_key\":null,\"payment_methods\":[{\"name\":\"BANCOLOMBIA_BNPL\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_BNPL_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_COLLECT\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_COLLECT_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_QR\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_QR_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_TRANSFER\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_TRANSFER_SANDBOX\"}]},{\"name\":\"CARD\",\"payment_processors\":[{\"name\":\"CARD_SANDBOX\"}]},{\"name\":\"DAVIPLATA\",\"payment_processors\":[{\"name\":\"DAVIPLATA_SANDBOX\"}]},{\"name\":\"NEQUI\",\"payment_processors\":[{\"name\":\"NEQUI_SANDBOX\"}]},{\"name\":\"PSE\",\"payment_processors\":[{\"name\":\"PSE_SANDBOX\"}]},{\"name\":\"SU_PLUS\",\"payment_processors\":[{\"name\":\"SU_PLUS_SANDBOX\"}]}],\"fraud_groups\":[],\"name\":\"Alejandra Pruebas Sandbox UAT\",\"phone_number\":\"+573000000000\",\"id\":5113,\"legal_name\":\"Alejandra Pruebas Sandbox UAT\",\"presigned_personal_data_auth\":{\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6Mzc1LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLWFkbWluaXN0cmFjaW9uLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiOTVkYzcwN2M0M2UxYmViMDAwMDUyZDNkNWJhZThhMDAiLCJqaXQiOiIxNzM1MjM4MzEyLTY0OTcwIiwiZW1haWwiOiIifQ.yr3MKGgrnYZzOgO-4OPpf_kQD8e_8lKFs_KilP7Fstw\",\"permalink\":\"https:\\\/\\\/wompi.com\\\/assets\\\/downloadble\\\/autorizacion-administracion-datos-personales.pdf\",\"type\":\"PERSONAL_DATA_AUTH\"},\"presigned_acceptance\":{\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3MzUyMzgzMTItMjQ1MTkiLCJlbWFpbCI6IiIsImV4cCI6MTczNTI0MTkxMn0.mOJNd7mnardY2SokzEg2h9Hqr3vlLdkfloZW4ujrlhQ\",\"permalink\":\"https:\\\/\\\/wompi.com\\\/assets\\\/downloadble\\\/reglamento-Usuarios-Colombia.pdf\",\"type\":\"END_USER_POLICY\"},\"email\":\"pruebasensandbox@yopmail.com\",\"accepted_currencies\":[\"COP\"],\"legal_id_type\":\"CC\"},\"meta\":{}}\n"},{"result":{"nanos":9200,"millis":0.0092,"status":"passed"},"step":{"line":13,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":324000,"millis":0.324,"status":"passed"},"step":{"line":14,"prefix":"And","index":3,"text":"match response.data.presigned_acceptance.acceptance_token == '#string'"}},{"result":{"nanos":201100,"millis":0.2011,"status":"passed"},"step":{"line":15,"prefix":"And","index":4,"text":"match response.data.presigned_personal_data_auth.acceptance_token == '#string'"}}],"executorName":"main","line":10,"name":"Obtener tokens","description":"","durationMillis":491.2357,"startTime":1735238310364,"failed":false,"refId":"[1:10]","endTime":1735238310855,"exampleIndex":-1}],"callDepth":1,"name":"Obtener los tokens de aceptación","description":"","resultDate":"2024-12-26 01:38:31 p. m.","durationMillis":491.2357,"passedCount":1}]},{"result":{"nanos":203300,"millis":0.2033,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"def createSignature = Java.type('karate.utils.Generate')"}},{"result":{"nanos":181100,"millis":0.1811,"status":"passed"},"step":{"line":45,"prefix":"*","index":0,"text":"def reference = createSignature.generarCodigo()"}},{"result":{"nanos":735300,"millis":0.7353,"status":"passed"},"step":{"line":46,"prefix":"*","index":1,"text":"def signature = createSignature.generateSHA256Hash(reference,160000,'COP',integrityKey)"}},{"result":{"nanos":337900,"millis":0.3379,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"set bodyRequest.amount_in_cents = 160000"}},{"result":{"nanos":135100,"millis":0.1351,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"set bodyRequest.currency = 'COP'"}},{"result":{"nanos":66900,"millis":0.0669,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"set bodyRequest.reference = reference"}},{"result":{"nanos":63500,"millis":0.0635,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"set bodyRequest.signature = signature"}},{"result":{"nanos":201300,"millis":0.2013,"status":"passed"},"step":{"line":51,"prefix":"*","index":6,"text":"set bodyRequest.customer_data = customerData.customer_data"}},{"result":{"nanos":322900,"millis":0.3229,"status":"passed"},"step":{"line":52,"prefix":"*","index":7,"text":"set bodyRequest.payment_method = paymentMethod.BANCOLOMBIA_QR"}},{"result":{"nanos":154900,"millis":0.1549,"status":"passed"},"step":{"line":53,"prefix":"Given","index":8,"text":"path transactionPath"}},{"result":{"nanos":11500,"millis":0.0115,"status":"passed"},"step":{"line":54,"prefix":"And","index":9,"text":"header Authorization = authToken"}},{"result":{"nanos":4300,"millis":0.0043,"status":"passed"},"step":{"line":55,"prefix":"And","index":10,"text":"request bodyRequest"}},{"result":{"nanos":688916100,"millis":688.9161,"status":"passed"},"step":{"line":56,"prefix":"When","index":11,"text":"method POST"},"stepLog":"13:38:30.860 request:\n1 > POST https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions\n1 > Authorization: Bearer pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 1163\n1 > Host: api-sandbox.co.uat.wompi.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.19)\n1 > Accept-Encoding: gzip,deflate\n{\"reference\":\"sk8-M3Ry-2q7B-5Qlb\",\"amount_in_cents\":160000,\"signature\":\"4054b870f2ad681efd445e66623300ea2580eb86b6cb6f0b6c0ee0713a98d8df\",\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3MzUxNjA1MjktNjYzMzgiLCJlbWFpbCI6IiIsImV4cCI6MTczNTE2NDEyOX0.TJACdrIMVUBzXX85sodEWtTWiTvKwVz4tF4SaxeRIHI\",\"customer_email\":\"example@wompi.co\",\"customer_data\":{\"legal_id\":\"1234567890\",\"full_name\":\"Juan Alfonso Pérez Rodríguez\",\"phone_number\":\"573307654321\",\"legal_id_type\":\"CC\"},\"currency\":\"COP\",\"accept_personal_auth\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6Mzc1LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLWFkbWluaXN0cmFjaW9uLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiOTVkYzcwN2M0M2UxYmViMDAwMDUyZDNkNWJhZThhMDAiLCJqaXQiOiIxNzM1MTYwNTI5LTMyNjIyIiwiZW1haWwiOiIifQ.QjtNF_4v7CzQebL7PaSRKd5IXJM51KIDwcjev_93V1k\",\"payment_method\":{\"payment_description\":\"Pago a Tienda Wompi\",\"type\":\"BANCOLOMBIA_QR\",\"sandbox_status\":\"APPROVED\"}}\n\n13:38:31.547 response time in milliseconds: 686\n1 < 422\n1 < Content-Type: application\/json\n1 < Content-Length: 116\n1 < Connection: keep-alive\n1 < Date: Thu, 26 Dec 2024 18:38:32 GMT\n1 < vary: Origin\n1 < apigw-requestid: DaZaXhwrIAMEbsg=\n1 < X-Cache: Error from cloudfront\n1 < Via: 1.1 130ce7c752c5865952ded89032560b32.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MIA3-C3\n1 < X-Amz-Cf-Id: cDTI8OzHZAKKEE1sk3fo0nGYM6M2Ruumkh-P9dDYB6utmNMdQ5EXfQ==\n{\"error\":{\"messages\":{\"acceptance_token\":[\"El token de aceptación ya fue usado\"]},\"type\":\"INPUT_VALIDATION_ERROR\"}}\n"},{"result":{"nanos":27900,"errorMessage":"status code was: 422, expected: 201, response time in milliseconds: 686, url: https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions, response: \n{\"error\":{\"type\":\"INPUT_VALIDATION_ERROR\",\"messages\":{\"acceptance_token\":[\"El token de aceptación ya fue usado\"]}}}\nsrc\/test\/resources\/karate\/transactions\/transactions.feature:57","millis":0.0279,"status":"failed"},"step":{"line":57,"prefix":"Then","index":12,"text":"status 201"},"stepLog":"13:38:31.547 src\/test\/resources\/karate\/transactions\/transactions.feature:57\nThen status 201\nstatus code was: 422, expected: 201, response time in milliseconds: 686, url: https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions, response: \n{\"error\":{\"type\":\"INPUT_VALIDATION_ERROR\",\"messages\":{\"acceptance_token\":[\"El token de aceptación ya fue usado\"]}}}\nsrc\/test\/resources\/karate\/transactions\/transactions.feature:57\n"}],"line":61,"description":"","durationMillis":1194.8842,"failed":true,"error":"status code was: 422, expected: 201, response time in milliseconds: 686, url: https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions, response: \n{\"error\":{\"type\":\"INPUT_VALIDATION_ERROR\",\"messages\":{\"acceptance_token\":[\"El token de aceptación ya fue usado\"]}}}\nsrc\/test\/resources\/karate\/transactions\/transactions.feature:57","executorName":"main","name":"Transaccion fallida por token ya usados","startTime":1735238310348,"refId":"[2.2:61]","endTime":1735238311547,"exampleData":{"amount":"160000","currency":"'COP'","reference":"reference","integrity":"integrityKey","paymentMethod":"BANCOLOMBIA_QR"},"exampleIndex":1}],"callDepth":0,"name":"Realizar una transaccion","description":"","resultDate":"2024-12-26 01:38:31 p. m.","durationMillis":2959.5161,"passedCount":0}