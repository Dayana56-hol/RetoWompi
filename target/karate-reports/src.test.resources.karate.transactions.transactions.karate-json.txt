{"failedCount":1,"prefixedPath":"src\/test\/resources\/karate\/transactions\/transactions.feature","packageQualifiedName":"src.test.resources.karate.transactions.transactions","loopIndex":-1,"relativePath":"src\/test\/resources\/karate\/transactions\/transactions.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1079000,"millis":1.079,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url api.urlBase"}},{"result":{"nanos":80437100,"millis":80.4371,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def keys = read('classpath:karate\/common\/keys.json')"}},{"result":{"nanos":1716000,"millis":1.716,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def bodyRequest = read('classpath:karate\/transactions\/data\/transactions_body.json')"}},{"result":{"nanos":2317800,"millis":2.3178,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def paymentMethod = read('classpath:karate\/transactions\/data\/payment_method.json')"}},{"result":{"nanos":1925600,"millis":1.9256,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def customerData = read('classpath:karate\/transactions\/data\/customer_data.json')"}},{"result":{"nanos":799000,"millis":0.799,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def publicKey = keys.public_key"}},{"result":{"nanos":590200,"millis":0.5902,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def integrityKey = keys.integrity_key"}},{"result":{"nanos":520500,"millis":0.5205,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def authToken = 'Bearer ' + publicKey"}},{"result":{"nanos":482600,"millis":0.4826,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def transactionPath = path.transaction"}},{"result":{"nanos":1136077500,"millis":1136.0775,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"def tokens = call read('classpath:karate\/merchants\/merchants.feature')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:karate\/merchants\/merchants.feature","packageQualifiedName":"karate.merchants.merchants","loopIndex":-1,"relativePath":"karate\/merchants\/merchants.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":697600,"millis":0.6976,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url api.urlBase"}},{"result":{"nanos":1613100,"millis":1.6131,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def keys = read('classpath:karate\/common\/keys.json')"},"stepLog":"13:56:31.170 over-writing existing variable 'keys' with new value: read('classpath:karate\/common\/keys.json')\n"},{"result":{"nanos":522500,"millis":0.5225,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def publicKey = keys.public_key"},"stepLog":"13:56:31.172 over-writing existing variable 'publicKey' with new value: keys.public_key\n"},{"result":{"nanos":617700,"millis":0.6177,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def merchantsPath = path.merchants"}},{"result":{"nanos":15972700,"millis":15.9727,"status":"passed"},"step":{"line":11,"prefix":"Given","index":0,"text":"path merchantsPath, publicKey"}},{"result":{"nanos":1095389100,"millis":1095.3891,"status":"passed"},"step":{"line":12,"prefix":"When","index":1,"text":"method GET"},"stepLog":"13:56:31.310 request:\n1 > GET https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/merchants\/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\n1 > Host: api-sandbox.co.uat.wompi.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.19)\n1 > Accept-Encoding: gzip,deflate\n\n\n13:56:32.283 response time in milliseconds: 965\n1 < 200\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Connection: keep-alive\n1 < Date: Thu, 26 Dec 2024 18:56:33 GMT\n1 < apigw-requestid: DacDRjtSIAMEZNA=\n1 < vary: Origin\n1 < vary: accept-encoding\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 a205b777009b4117039d629e4ab51416.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MIA3-C3\n1 < X-Amz-Cf-Id: -2eOaFD1gWGWdAeynjuieMp7J9QG9ihCfOPUD_pduFo0DYUPiR9Vcg==\n{\"data\":{\"public_key\":\"pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\",\"legal_id\":\"1069879849\",\"contact_name\":\"Alejandra Pruebas Sandbox UAT\",\"logo_url\":null,\"active\":true,\"accepted_payment_methods\":[\"NEQUI\",\"PSE\",\"BANCOLOMBIA_TRANSFER\",\"CARD\",\"BANCOLOMBIA_COLLECT\",\"BANCOLOMBIA_QR\",\"DAVIPLATA\",\"BANCOLOMBIA_BNPL\",\"SU_PLUS\"],\"fraud_javascript_key\":null,\"payment_methods\":[{\"name\":\"BANCOLOMBIA_BNPL\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_BNPL_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_COLLECT\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_COLLECT_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_QR\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_QR_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_TRANSFER\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_TRANSFER_SANDBOX\"}]},{\"name\":\"CARD\",\"payment_processors\":[{\"name\":\"CARD_SANDBOX\"}]},{\"name\":\"DAVIPLATA\",\"payment_processors\":[{\"name\":\"DAVIPLATA_SANDBOX\"}]},{\"name\":\"NEQUI\",\"payment_processors\":[{\"name\":\"NEQUI_SANDBOX\"}]},{\"name\":\"PSE\",\"payment_processors\":[{\"name\":\"PSE_SANDBOX\"}]},{\"name\":\"SU_PLUS\",\"payment_processors\":[{\"name\":\"SU_PLUS_SANDBOX\"}]}],\"fraud_groups\":[],\"name\":\"Alejandra Pruebas Sandbox UAT\",\"phone_number\":\"+573000000000\",\"id\":5113,\"legal_name\":\"Alejandra Pruebas Sandbox UAT\",\"presigned_personal_data_auth\":{\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6Mzc1LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLWFkbWluaXN0cmFjaW9uLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiOTVkYzcwN2M0M2UxYmViMDAwMDUyZDNkNWJhZThhMDAiLCJqaXQiOiIxNzM1MjM5MzkzLTMzNTcwIiwiZW1haWwiOiIifQ.v-I2h9TBfexmVo01mvStlCV2Wl0wOZoZDVOROLb70Ts\",\"permalink\":\"https:\\\/\\\/wompi.com\\\/assets\\\/downloadble\\\/autorizacion-administracion-datos-personales.pdf\",\"type\":\"PERSONAL_DATA_AUTH\"},\"presigned_acceptance\":{\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3MzUyMzkzOTMtOTk4NjEiLCJlbWFpbCI6IiIsImV4cCI6MTczNTI0Mjk5M30.YK1q49zMTiKpViA0IU_NRFMF-WSffKdfrFxFq16eCSI\",\"permalink\":\"https:\\\/\\\/wompi.com\\\/assets\\\/downloadble\\\/reglamento-Usuarios-Colombia.pdf\",\"type\":\"END_USER_POLICY\"},\"email\":\"pruebasensandbox@yopmail.com\",\"accepted_currencies\":[\"COP\"],\"legal_id_type\":\"CC\"},\"meta\":{}}\n"},{"result":{"nanos":32600,"millis":0.0326,"status":"passed"},"step":{"line":13,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":7000400,"millis":7.0004,"status":"passed"},"step":{"line":14,"prefix":"And","index":3,"text":"match response.data.presigned_acceptance.acceptance_token == '#string'"}},{"result":{"nanos":205800,"millis":0.2058,"status":"passed"},"step":{"line":15,"prefix":"And","index":4,"text":"match response.data.presigned_personal_data_auth.acceptance_token == '#string'"}}],"executorName":"main","line":10,"name":"Obtener tokens","description":"","durationMillis":1122.0515,"startTime":1735239391169,"failed":false,"refId":"[1:10]","endTime":1735239392291,"exampleIndex":-1}],"callDepth":1,"name":"Obtener los tokens de aceptación","description":"","resultDate":"2024-12-26 01:56:35 p. m.","durationMillis":1122.0515,"passedCount":1}]},{"result":{"nanos":4102600,"millis":4.1026,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"def createSignature = Java.type('karate.utils.Generate')"}},{"result":{"nanos":1626500,"millis":1.6265,"status":"passed"},"step":{"line":18,"prefix":"*","index":0,"text":"def reference = createSignature.generarCodigo()"}},{"result":{"nanos":14385800,"millis":14.3858,"status":"passed"},"step":{"line":19,"prefix":"*","index":1,"text":"def signature = createSignature.generateSHA256Hash(reference,150000,'COP',integrityKey)"}},{"result":{"nanos":1242600,"millis":1.2426,"status":"passed"},"step":{"line":20,"prefix":"*","index":2,"text":"set bodyRequest.amount_in_cents = 150000"}},{"result":{"nanos":574800,"millis":0.5748,"status":"passed"},"step":{"line":21,"prefix":"*","index":3,"text":"set bodyRequest.currency = 'COP'"}},{"result":{"nanos":100200,"millis":0.1002,"status":"passed"},"step":{"line":22,"prefix":"*","index":4,"text":"set bodyRequest.reference = reference"}},{"result":{"nanos":86500,"millis":0.0865,"status":"passed"},"step":{"line":23,"prefix":"*","index":5,"text":"set bodyRequest.signature = signature"}},{"result":{"nanos":746000,"millis":0.746,"status":"passed"},"step":{"line":24,"prefix":"*","index":6,"text":"set bodyRequest.customer_data = customerData.customer_data"}},{"result":{"nanos":741900,"millis":0.7419,"status":"passed"},"step":{"line":25,"prefix":"*","index":7,"text":"set bodyRequest.payment_method = paymentMethod.BANCOLOMBIA_QR"}},{"result":{"nanos":717700,"millis":0.7177,"status":"passed"},"step":{"line":26,"prefix":"*","index":8,"text":"set bodyRequest.acceptance_token = tokens.response.data.presigned_acceptance.acceptance_token"}},{"result":{"nanos":960100,"millis":0.9601,"status":"passed"},"step":{"line":27,"prefix":"*","index":9,"text":"set bodyRequest.accept_personal_auth = tokens.response.data.presigned_personal_data_auth.acceptance_token"}},{"result":{"nanos":1035400,"millis":1.0354,"status":"passed"},"step":{"line":28,"prefix":"Given","index":10,"text":"path transactionPath"}},{"result":{"nanos":86600,"millis":0.0866,"status":"passed"},"step":{"line":29,"prefix":"And","index":11,"text":"header Authorization = authToken"}},{"result":{"nanos":30800,"millis":0.0308,"status":"passed"},"step":{"line":30,"prefix":"And","index":12,"text":"request bodyRequest"}},{"result":{"nanos":941125400,"millis":941.1254,"status":"passed"},"step":{"line":31,"prefix":"When","index":13,"text":"method POST"},"stepLog":"13:56:32.360 request:\n1 > POST https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions\n1 > Authorization: Bearer pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 1163\n1 > Host: api-sandbox.co.uat.wompi.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.19)\n1 > Accept-Encoding: gzip,deflate\n{\"reference\":\"sk8-HXiv-XSxE-HjNJ\",\"amount_in_cents\":150000,\"signature\":\"92d6e101ae76c9e3ad05bde418fb69ffa95b307dfff17a010e49ff24e542d5fb\",\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3MzUyMzkzOTMtOTk4NjEiLCJlbWFpbCI6IiIsImV4cCI6MTczNTI0Mjk5M30.YK1q49zMTiKpViA0IU_NRFMF-WSffKdfrFxFq16eCSI\",\"customer_email\":\"example@wompi.co\",\"customer_data\":{\"legal_id\":\"1234567890\",\"full_name\":\"Juan Alfonso Pérez Rodríguez\",\"phone_number\":\"573307654321\",\"legal_id_type\":\"CC\"},\"currency\":\"COP\",\"accept_personal_auth\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6Mzc1LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLWFkbWluaXN0cmFjaW9uLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiOTVkYzcwN2M0M2UxYmViMDAwMDUyZDNkNWJhZThhMDAiLCJqaXQiOiIxNzM1MjM5MzkzLTMzNTcwIiwiZW1haWwiOiIifQ.v-I2h9TBfexmVo01mvStlCV2Wl0wOZoZDVOROLb70Ts\",\"payment_method\":{\"payment_description\":\"Pago a Tienda Wompi\",\"type\":\"BANCOLOMBIA_QR\",\"sandbox_status\":\"APPROVED\"}}\n\n13:56:33.261 response time in milliseconds: 899\n1 < 201\n1 < Content-Type: application\/json\n1 < Content-Length: 768\n1 < Connection: keep-alive\n1 < Date: Thu, 26 Dec 2024 18:56:34 GMT\n1 < vary: Origin\n1 < apigw-requestid: DacDXgZioAMEb5A=\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 64f46386c7d793ef08095943662bb42a.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MIA3-C3\n1 < X-Amz-Cf-Id: lMzy2-kBYlUfWrjFABRtcwIYXsNPLBF4g2lMmeaOBX5ITf8xixarwQ==\n{\"data\":{\"finalized_at\":null,\"payment_method_type\":\"BANCOLOMBIA_QR\",\"status_message\":null,\"bill_id\":null,\"payment_source_id\":null,\"payment_link_id\":null,\"created_at\":\"2024-12-26T18:56:34.424Z\",\"taxes\":[],\"tip_in_cents\":null,\"reference\":\"sk8-HXiv-XSxE-HjNJ\",\"billing_data\":null,\"amount_in_cents\":150000,\"customer_email\":\"example@wompi.co\",\"customer_data\":{\"legal_id\":\"1234567890\",\"full_name\":\"Juan Alfonso Pérez Rodríguez\",\"phone_number\":\"573307654321\",\"legal_id_type\":\"CC\"},\"currency\":\"COP\",\"id\":\"15113-1735239394-49231\",\"shipping_address\":null,\"payment_method\":{\"payment_description\":\"Pago a Tienda Wompi\",\"extra\":{\"is_three_ds\":false,\"three_ds_auth_type\":null},\"type\":\"BANCOLOMBIA_QR\",\"sandbox_status\":\"APPROVED\"},\"redirect_url\":null,\"status\":\"PENDING\"},\"meta\":{}}\n"},{"result":{"nanos":6900,"millis":0.0069,"status":"passed"},"step":{"line":32,"prefix":"Then","index":14,"text":"status 201"}},{"result":{"nanos":535600,"millis":0.5356,"status":"passed"},"step":{"line":33,"prefix":"And","index":15,"text":"match response.data.payment_method_type == 'BANCOLOMBIA_QR'"}},{"result":{"nanos":188800,"millis":0.1888,"status":"passed"},"step":{"line":34,"prefix":"And","index":16,"text":"match response.data.amount_in_cents == 150000"}},{"result":{"nanos":130200,"millis":0.1302,"status":"passed"},"step":{"line":35,"prefix":"And","index":17,"text":"match response.data.currency == 'COP'"}},{"result":{"nanos":350800,"millis":0.3508,"status":"passed"},"step":{"line":36,"prefix":"And","index":18,"text":"match response.data.payment_method.sandbox_status == 'APPROVED'"}},{"result":{"nanos":98500,"millis":0.0985,"status":"passed"},"step":{"line":37,"prefix":"And","index":19,"text":"match response.data.reference == reference"}}],"line":40,"description":"","durationMillis":2194.819,"failed":false,"tags":["SuccessTransaction"],"executorName":"main","name":"Transaccion exitosa por Bancolombia QR","startTime":1735239389119,"refId":"[1.1:40]","endTime":1735239393263,"exampleData":{"amount":"150000","currency":"'COP'","reference":"reference","integrity":"integrityKey","paymentMethod":"BANCOLOMBIA_QR","status":"APPROVED"},"exampleIndex":0},{"sectionIndex":0,"stepResults":[{"result":{"nanos":307300,"millis":0.3073,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url api.urlBase"}},{"result":{"nanos":1765800,"millis":1.7658,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def keys = read('classpath:karate\/common\/keys.json')"}},{"result":{"nanos":708400,"millis":0.7084,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def bodyRequest = read('classpath:karate\/transactions\/data\/transactions_body.json')"}},{"result":{"nanos":525900,"millis":0.5259,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def paymentMethod = read('classpath:karate\/transactions\/data\/payment_method.json')"}},{"result":{"nanos":556800,"millis":0.5568,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def customerData = read('classpath:karate\/transactions\/data\/customer_data.json')"}},{"result":{"nanos":146500,"millis":0.1465,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def publicKey = keys.public_key"}},{"result":{"nanos":122500,"millis":0.1225,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def integrityKey = keys.integrity_key"}},{"result":{"nanos":120600,"millis":0.1206,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def authToken = 'Bearer ' + publicKey"}},{"result":{"nanos":196300,"millis":0.1963,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def transactionPath = path.transaction"}},{"result":{"nanos":394558200,"millis":394.5582,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"def tokens = call read('classpath:karate\/merchants\/merchants.feature')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:karate\/merchants\/merchants.feature","packageQualifiedName":"karate.merchants.merchants","loopIndex":-1,"relativePath":"karate\/merchants\/merchants.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":152100,"millis":0.1521,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url api.urlBase"}},{"result":{"nanos":1041300,"millis":1.0413,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def keys = read('classpath:karate\/common\/keys.json')"},"stepLog":"13:56:33.284 over-writing existing variable 'keys' with new value: read('classpath:karate\/common\/keys.json')\n"},{"result":{"nanos":358600,"millis":0.3586,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def publicKey = keys.public_key"},"stepLog":"13:56:33.285 over-writing existing variable 'publicKey' with new value: keys.public_key\n"},{"result":{"nanos":140000,"millis":0.14,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def merchantsPath = path.merchants"}},{"result":{"nanos":196400,"millis":0.1964,"status":"passed"},"step":{"line":11,"prefix":"Given","index":0,"text":"path merchantsPath, publicKey"}},{"result":{"nanos":384442300,"millis":384.4423,"status":"passed"},"step":{"line":12,"prefix":"When","index":1,"text":"method GET"},"stepLog":"13:56:33.287 request:\n1 > GET https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/merchants\/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\n1 > Host: api-sandbox.co.uat.wompi.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.19)\n1 > Accept-Encoding: gzip,deflate\n\n\n13:56:33.670 response time in milliseconds: 382\n1 < 200\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Connection: keep-alive\n1 < Date: Thu, 26 Dec 2024 18:56:34 GMT\n1 < apigw-requestid: DacDfip9oAMEbsg=\n1 < vary: Origin\n1 < vary: accept-encoding\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 41958139e7d828579c6466c1ce1c7b26.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MIA3-C3\n1 < X-Amz-Cf-Id: ysb7lLDZMTSEQn9up-G-7J3cFJqU0cox8Ha9EvAseBFC8yLS_cPRmg==\n{\"data\":{\"public_key\":\"pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\",\"legal_id\":\"1069879849\",\"contact_name\":\"Alejandra Pruebas Sandbox UAT\",\"logo_url\":null,\"active\":true,\"accepted_payment_methods\":[\"NEQUI\",\"PSE\",\"BANCOLOMBIA_TRANSFER\",\"CARD\",\"BANCOLOMBIA_COLLECT\",\"BANCOLOMBIA_QR\",\"DAVIPLATA\",\"BANCOLOMBIA_BNPL\",\"SU_PLUS\"],\"fraud_javascript_key\":null,\"payment_methods\":[{\"name\":\"BANCOLOMBIA_BNPL\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_BNPL_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_COLLECT\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_COLLECT_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_QR\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_QR_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_TRANSFER\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_TRANSFER_SANDBOX\"}]},{\"name\":\"CARD\",\"payment_processors\":[{\"name\":\"CARD_SANDBOX\"}]},{\"name\":\"DAVIPLATA\",\"payment_processors\":[{\"name\":\"DAVIPLATA_SANDBOX\"}]},{\"name\":\"NEQUI\",\"payment_processors\":[{\"name\":\"NEQUI_SANDBOX\"}]},{\"name\":\"PSE\",\"payment_processors\":[{\"name\":\"PSE_SANDBOX\"}]},{\"name\":\"SU_PLUS\",\"payment_processors\":[{\"name\":\"SU_PLUS_SANDBOX\"}]}],\"fraud_groups\":[],\"name\":\"Alejandra Pruebas Sandbox UAT\",\"phone_number\":\"+573000000000\",\"id\":5113,\"legal_name\":\"Alejandra Pruebas Sandbox UAT\",\"presigned_personal_data_auth\":{\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6Mzc1LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLWFkbWluaXN0cmFjaW9uLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiOTVkYzcwN2M0M2UxYmViMDAwMDUyZDNkNWJhZThhMDAiLCJqaXQiOiIxNzM1MjM5Mzk0LTExMTAxIiwiZW1haWwiOiIifQ.FXiAJh-RNQqF6hbD6guFoX2il4L_c9TNDqvKGIiFNVU\",\"permalink\":\"https:\\\/\\\/wompi.com\\\/assets\\\/downloadble\\\/autorizacion-administracion-datos-personales.pdf\",\"type\":\"PERSONAL_DATA_AUTH\"},\"presigned_acceptance\":{\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3MzUyMzkzOTQtNTU0OTkiLCJlbWFpbCI6IiIsImV4cCI6MTczNTI0Mjk5NH0.ym36HFpf9s0JReHZ4yfx6tnFbiftQ5i7KaBYLehdv0o\",\"permalink\":\"https:\\\/\\\/wompi.com\\\/assets\\\/downloadble\\\/reglamento-Usuarios-Colombia.pdf\",\"type\":\"END_USER_POLICY\"},\"email\":\"pruebasensandbox@yopmail.com\",\"accepted_currencies\":[\"COP\"],\"legal_id_type\":\"CC\"},\"meta\":{}}\n"},{"result":{"nanos":7300,"millis":0.0073,"status":"passed"},"step":{"line":13,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":239100,"millis":0.2391,"status":"passed"},"step":{"line":14,"prefix":"And","index":3,"text":"match response.data.presigned_acceptance.acceptance_token == '#string'"}},{"result":{"nanos":165600,"millis":0.1656,"status":"passed"},"step":{"line":15,"prefix":"And","index":4,"text":"match response.data.presigned_personal_data_auth.acceptance_token == '#string'"}}],"executorName":"main","line":10,"name":"Obtener tokens","description":"","durationMillis":386.7427,"startTime":1735239393284,"failed":false,"refId":"[1:10]","endTime":1735239393671,"exampleIndex":-1}],"callDepth":1,"name":"Obtener los tokens de aceptación","description":"","resultDate":"2024-12-26 01:56:35 p. m.","durationMillis":386.7427,"passedCount":1}]},{"result":{"nanos":212500,"millis":0.2125,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"def createSignature = Java.type('karate.utils.Generate')"}},{"result":{"nanos":150800,"millis":0.1508,"status":"passed"},"step":{"line":18,"prefix":"*","index":0,"text":"def reference = createSignature.generarCodigo()"}},{"result":{"nanos":852700,"millis":0.8527,"status":"passed"},"step":{"line":19,"prefix":"*","index":1,"text":"def signature = createSignature.generateSHA256Hash(reference,160000,'COP',integrityKey)"}},{"result":{"nanos":393400,"millis":0.3934,"status":"passed"},"step":{"line":20,"prefix":"*","index":2,"text":"set bodyRequest.amount_in_cents = 160000"}},{"result":{"nanos":115100,"millis":0.1151,"status":"passed"},"step":{"line":21,"prefix":"*","index":3,"text":"set bodyRequest.currency = 'COP'"}},{"result":{"nanos":55900,"millis":0.0559,"status":"passed"},"step":{"line":22,"prefix":"*","index":4,"text":"set bodyRequest.reference = reference"}},{"result":{"nanos":52300,"millis":0.0523,"status":"passed"},"step":{"line":23,"prefix":"*","index":5,"text":"set bodyRequest.signature = signature"}},{"result":{"nanos":169300,"millis":0.1693,"status":"passed"},"step":{"line":24,"prefix":"*","index":6,"text":"set bodyRequest.customer_data = customerData.customer_data"}},{"result":{"nanos":151600,"millis":0.1516,"status":"passed"},"step":{"line":25,"prefix":"*","index":7,"text":"set bodyRequest.payment_method = paymentMethod.BANCOLOMBIA_QR"}},{"result":{"nanos":150500,"millis":0.1505,"status":"passed"},"step":{"line":26,"prefix":"*","index":8,"text":"set bodyRequest.acceptance_token = tokens.response.data.presigned_acceptance.acceptance_token"}},{"result":{"nanos":474100,"millis":0.4741,"status":"passed"},"step":{"line":27,"prefix":"*","index":9,"text":"set bodyRequest.accept_personal_auth = tokens.response.data.presigned_personal_data_auth.acceptance_token"}},{"result":{"nanos":140000,"millis":0.14,"status":"passed"},"step":{"line":28,"prefix":"Given","index":10,"text":"path transactionPath"}},{"result":{"nanos":10800,"millis":0.0108,"status":"passed"},"step":{"line":29,"prefix":"And","index":11,"text":"header Authorization = authToken"}},{"result":{"nanos":3900,"millis":0.0039,"status":"passed"},"step":{"line":30,"prefix":"And","index":12,"text":"request bodyRequest"}},{"result":{"nanos":728598900,"millis":728.5989,"status":"passed"},"step":{"line":31,"prefix":"When","index":13,"text":"method POST"},"stepLog":"13:56:33.676 request:\n1 > POST https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions\n1 > Authorization: Bearer pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 1163\n1 > Host: api-sandbox.co.uat.wompi.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.19)\n1 > Accept-Encoding: gzip,deflate\n{\"reference\":\"sk8-2H8X-vwAp-mWii\",\"amount_in_cents\":160000,\"signature\":\"41fc900fc0e4e28a30de95a84b529833c8acd3da89f36c03ecb7e612f1bcef75\",\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3MzUyMzkzOTQtNTU0OTkiLCJlbWFpbCI6IiIsImV4cCI6MTczNTI0Mjk5NH0.ym36HFpf9s0JReHZ4yfx6tnFbiftQ5i7KaBYLehdv0o\",\"customer_email\":\"example@wompi.co\",\"customer_data\":{\"legal_id\":\"1234567890\",\"full_name\":\"Juan Alfonso Pérez Rodríguez\",\"phone_number\":\"573307654321\",\"legal_id_type\":\"CC\"},\"currency\":\"COP\",\"accept_personal_auth\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6Mzc1LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLWFkbWluaXN0cmFjaW9uLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiOTVkYzcwN2M0M2UxYmViMDAwMDUyZDNkNWJhZThhMDAiLCJqaXQiOiIxNzM1MjM5Mzk0LTExMTAxIiwiZW1haWwiOiIifQ.FXiAJh-RNQqF6hbD6guFoX2il4L_c9TNDqvKGIiFNVU\",\"payment_method\":{\"payment_description\":\"Pago a Tienda Wompi\",\"type\":\"BANCOLOMBIA_QR\",\"sandbox_status\":\"APPROVED\"}}\n\n13:56:34.402 response time in milliseconds: 725\n1 < 201\n1 < Content-Type: application\/json\n1 < Content-Length: 768\n1 < Connection: keep-alive\n1 < Date: Thu, 26 Dec 2024 18:56:35 GMT\n1 < vary: Origin\n1 < apigw-requestid: DacDjgZ0IAMEZYg=\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 cebfdc6d2f4a814559743884c0ccf616.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MIA3-C3\n1 < X-Amz-Cf-Id: A4Xb4zWT3FmJnIEb_b1WxAONca8a4KgToyqNCj_2b4dVyiYLi69_Yg==\n{\"data\":{\"finalized_at\":null,\"payment_method_type\":\"BANCOLOMBIA_QR\",\"status_message\":null,\"bill_id\":null,\"payment_source_id\":null,\"payment_link_id\":null,\"created_at\":\"2024-12-26T18:56:35.607Z\",\"taxes\":[],\"tip_in_cents\":null,\"reference\":\"sk8-2H8X-vwAp-mWii\",\"billing_data\":null,\"amount_in_cents\":160000,\"customer_email\":\"example@wompi.co\",\"customer_data\":{\"legal_id\":\"1234567890\",\"full_name\":\"Juan Alfonso Pérez Rodríguez\",\"phone_number\":\"573307654321\",\"legal_id_type\":\"CC\"},\"currency\":\"COP\",\"id\":\"15113-1735239395-30216\",\"shipping_address\":null,\"payment_method\":{\"payment_description\":\"Pago a Tienda Wompi\",\"extra\":{\"is_three_ds\":false,\"three_ds_auth_type\":null},\"type\":\"BANCOLOMBIA_QR\",\"sandbox_status\":\"APPROVED\"},\"redirect_url\":null,\"status\":\"PENDING\"},\"meta\":{}}\n"},{"result":{"nanos":7200,"millis":0.0072,"status":"passed"},"step":{"line":32,"prefix":"Then","index":14,"text":"status 201"}},{"result":{"nanos":310700,"millis":0.3107,"status":"passed"},"step":{"line":33,"prefix":"And","index":15,"text":"match response.data.payment_method_type == 'BANCOLOMBIA_QR'"}},{"result":{"nanos":180800,"millis":0.1808,"status":"passed"},"step":{"line":34,"prefix":"And","index":16,"text":"match response.data.amount_in_cents == 160000"}},{"result":{"nanos":121400,"millis":0.1214,"status":"passed"},"step":{"line":35,"prefix":"And","index":17,"text":"match response.data.currency == 'COP'"}},{"result":{"nanos":102000,"millis":0.102,"status":"passed"},"step":{"line":36,"prefix":"And","index":18,"text":"match response.data.payment_method.sandbox_status == 'APPROVED'"}},{"result":{"nanos":53600,"millis":0.0536,"status":"passed"},"step":{"line":37,"prefix":"And","index":19,"text":"match response.data.reference == reference"}}],"line":41,"description":"","durationMillis":1131.3158,"failed":false,"tags":["SuccessTransaction"],"executorName":"main","name":"Transaccion exitosa por Bancolombia QR","startTime":1735239393268,"refId":"[1.2:41]","endTime":1735239394403,"exampleData":{"amount":"160000","currency":"'COP'","reference":"reference","integrity":"integrityKey","paymentMethod":"BANCOLOMBIA_QR","status":"APPROVED"},"exampleIndex":1},{"sectionIndex":4,"stepResults":[{"result":{"nanos":142500,"millis":0.1425,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url api.urlBase"}},{"result":{"nanos":1056500,"millis":1.0565,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def keys = read('classpath:karate\/common\/keys.json')"}},{"result":{"nanos":955400,"millis":0.9554,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def bodyRequest = read('classpath:karate\/transactions\/data\/transactions_body.json')"}},{"result":{"nanos":756700,"millis":0.7567,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def paymentMethod = read('classpath:karate\/transactions\/data\/payment_method.json')"}},{"result":{"nanos":738900,"millis":0.7389,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def customerData = read('classpath:karate\/transactions\/data\/customer_data.json')"}},{"result":{"nanos":214600,"millis":0.2146,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def publicKey = keys.public_key"}},{"result":{"nanos":135700,"millis":0.1357,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def integrityKey = keys.integrity_key"}},{"result":{"nanos":114900,"millis":0.1149,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def authToken = 'Bearer ' + publicKey"}},{"result":{"nanos":252400,"millis":0.2524,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def transactionPath = path.transaction"}},{"result":{"nanos":347225600,"millis":347.2256,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":9,"text":"def tokens = call read('classpath:karate\/merchants\/merchants.feature')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:karate\/merchants\/merchants.feature","packageQualifiedName":"karate.merchants.merchants","loopIndex":-1,"relativePath":"karate\/merchants\/merchants.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":209800,"millis":0.2098,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"url api.urlBase"}},{"result":{"nanos":1169700,"millis":1.1697,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def keys = read('classpath:karate\/common\/keys.json')"},"stepLog":"13:56:34.424 over-writing existing variable 'keys' with new value: read('classpath:karate\/common\/keys.json')\n"},{"result":{"nanos":470900,"millis":0.4709,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def publicKey = keys.public_key"},"stepLog":"13:56:34.425 over-writing existing variable 'publicKey' with new value: keys.public_key\n"},{"result":{"nanos":227200,"millis":0.2272,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def merchantsPath = path.merchants"}},{"result":{"nanos":2682100,"millis":2.6821,"status":"passed"},"step":{"line":11,"prefix":"Given","index":0,"text":"path merchantsPath, publicKey"}},{"result":{"nanos":332467800,"millis":332.4678,"status":"passed"},"step":{"line":12,"prefix":"When","index":1,"text":"method GET"},"stepLog":"13:56:34.430 request:\n1 > GET https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/merchants\/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\n1 > Host: api-sandbox.co.uat.wompi.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.19)\n1 > Accept-Encoding: gzip,deflate\n\n\n13:56:34.761 response time in milliseconds: 330\n1 < 200\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Connection: keep-alive\n1 < Date: Thu, 26 Dec 2024 18:56:36 GMT\n1 < apigw-requestid: DacDrj94oAMEZeg=\n1 < vary: Origin\n1 < vary: accept-encoding\n1 < X-Cache: Miss from cloudfront\n1 < Via: 1.1 04a7e6061ff44278cba30d4bada61a54.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MIA3-C3\n1 < X-Amz-Cf-Id: AtIb4_YkDxztgneFEIXWW-Cs0mDCB1e8Q7o1sevUt4Ip0Sfx2DuMCA==\n{\"data\":{\"public_key\":\"pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\",\"legal_id\":\"1069879849\",\"contact_name\":\"Alejandra Pruebas Sandbox UAT\",\"logo_url\":null,\"active\":true,\"accepted_payment_methods\":[\"NEQUI\",\"PSE\",\"BANCOLOMBIA_TRANSFER\",\"CARD\",\"BANCOLOMBIA_COLLECT\",\"BANCOLOMBIA_QR\",\"DAVIPLATA\",\"BANCOLOMBIA_BNPL\",\"SU_PLUS\"],\"fraud_javascript_key\":null,\"payment_methods\":[{\"name\":\"BANCOLOMBIA_BNPL\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_BNPL_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_COLLECT\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_COLLECT_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_QR\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_QR_SANDBOX\"}]},{\"name\":\"BANCOLOMBIA_TRANSFER\",\"payment_processors\":[{\"name\":\"BANCOLOMBIA_TRANSFER_SANDBOX\"}]},{\"name\":\"CARD\",\"payment_processors\":[{\"name\":\"CARD_SANDBOX\"}]},{\"name\":\"DAVIPLATA\",\"payment_processors\":[{\"name\":\"DAVIPLATA_SANDBOX\"}]},{\"name\":\"NEQUI\",\"payment_processors\":[{\"name\":\"NEQUI_SANDBOX\"}]},{\"name\":\"PSE\",\"payment_processors\":[{\"name\":\"PSE_SANDBOX\"}]},{\"name\":\"SU_PLUS\",\"payment_processors\":[{\"name\":\"SU_PLUS_SANDBOX\"}]}],\"fraud_groups\":[],\"name\":\"Alejandra Pruebas Sandbox UAT\",\"phone_number\":\"+573000000000\",\"id\":5113,\"legal_name\":\"Alejandra Pruebas Sandbox UAT\",\"presigned_personal_data_auth\":{\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6Mzc1LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLWFkbWluaXN0cmFjaW9uLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiOTVkYzcwN2M0M2UxYmViMDAwMDUyZDNkNWJhZThhMDAiLCJqaXQiOiIxNzM1MjM5Mzk2LTIyNzgyIiwiZW1haWwiOiIifQ.3TufVY6ilTYeCBTSkh9NHvsW9bZy9HAQSxc7APP3bas\",\"permalink\":\"https:\\\/\\\/wompi.com\\\/assets\\\/downloadble\\\/autorizacion-administracion-datos-personales.pdf\",\"type\":\"PERSONAL_DATA_AUTH\"},\"presigned_acceptance\":{\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3MzUyMzkzOTYtOTYyODEiLCJlbWFpbCI6IiIsImV4cCI6MTczNTI0Mjk5Nn0.F5RbGJY24J-u63L8eTN_Loi8qGnyZjIkw52sc3ucHII\",\"permalink\":\"https:\\\/\\\/wompi.com\\\/assets\\\/downloadble\\\/reglamento-Usuarios-Colombia.pdf\",\"type\":\"END_USER_POLICY\"},\"email\":\"pruebasensandbox@yopmail.com\",\"accepted_currencies\":[\"COP\"],\"legal_id_type\":\"CC\"},\"meta\":{}}\n"},{"result":{"nanos":6700,"millis":0.0067,"status":"passed"},"step":{"line":13,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":235000,"millis":0.235,"status":"passed"},"step":{"line":14,"prefix":"And","index":3,"text":"match response.data.presigned_acceptance.acceptance_token == '#string'"}},{"result":{"nanos":935700,"millis":0.9357,"status":"passed"},"step":{"line":15,"prefix":"And","index":4,"text":"match response.data.presigned_personal_data_auth.acceptance_token == '#string'"}}],"executorName":"main","line":10,"name":"Obtener tokens","description":"","durationMillis":338.4049,"startTime":1735239394424,"failed":false,"refId":"[1:10]","endTime":1735239394763,"exampleIndex":-1}],"callDepth":1,"name":"Obtener los tokens de aceptación","description":"","resultDate":"2024-12-26 01:56:35 p. m.","durationMillis":338.4049,"passedCount":1}]},{"result":{"nanos":172800,"millis":0.1728,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":10,"text":"def createSignature = Java.type('karate.utils.Generate')"}},{"result":{"nanos":171500,"millis":0.1715,"status":"passed"},"step":{"line":103,"prefix":"*","index":0,"text":"def reference = createSignature.generarCodigo()"}},{"result":{"nanos":165000,"millis":0.165,"status":"passed"},"step":{"line":104,"prefix":"*","index":1,"text":"set bodyRequest.amount_in_cents = 150000"}},{"result":{"nanos":100000,"millis":0.1,"status":"passed"},"step":{"line":105,"prefix":"*","index":2,"text":"set bodyRequest.currency = 'COP'"}},{"result":{"nanos":51300,"millis":0.0513,"status":"passed"},"step":{"line":106,"prefix":"*","index":3,"text":"set bodyRequest.reference = reference"}},{"result":{"nanos":186900,"millis":0.1869,"status":"passed"},"step":{"line":107,"prefix":"*","index":4,"text":"set bodyRequest.customer_data = customerData.customer_data"}},{"result":{"nanos":179100,"millis":0.1791,"status":"passed"},"step":{"line":108,"prefix":"*","index":5,"text":"set bodyRequest.payment_method = paymentMethod.BANCOLOMBIA_QR"}},{"result":{"nanos":173400,"millis":0.1734,"status":"passed"},"step":{"line":109,"prefix":"*","index":6,"text":"set bodyRequest.acceptance_token = tokens.response.data.presigned_acceptance.acceptance_token"}},{"result":{"nanos":174600,"millis":0.1746,"status":"passed"},"step":{"line":110,"prefix":"*","index":7,"text":"set bodyRequest.accept_personal_auth = tokens.response.data.presigned_personal_data_auth.acceptance_token"}},{"result":{"nanos":127100,"millis":0.1271,"status":"passed"},"step":{"line":111,"prefix":"Given","index":8,"text":"path transactionPath"}},{"result":{"nanos":11000,"millis":0.011,"status":"passed"},"step":{"line":112,"prefix":"And","index":9,"text":"header Authorization = authToken"}},{"result":{"nanos":3500,"millis":0.0035,"status":"passed"},"step":{"line":113,"prefix":"And","index":10,"text":"request bodyRequest"}},{"result":{"nanos":797089200,"millis":797.0892,"status":"passed"},"step":{"line":114,"prefix":"When","index":11,"text":"method POST"},"stepLog":"13:56:34.766 request:\n1 > POST https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions\n1 > Authorization: Bearer pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 1163\n1 > Host: api-sandbox.co.uat.wompi.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.19)\n1 > Accept-Encoding: gzip,deflate\n{\"reference\":\"sk8-H5lZ-kebB-69sf\",\"amount_in_cents\":150000,\"signature\":\"3d883ebbab56b15876b8d175456401ef0d8a616df84e9498b2fb38c006a2a58a\",\"acceptance_token\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3MzUyMzkzOTYtOTYyODEiLCJlbWFpbCI6IiIsImV4cCI6MTczNTI0Mjk5Nn0.F5RbGJY24J-u63L8eTN_Loi8qGnyZjIkw52sc3ucHII\",\"customer_email\":\"example@wompi.co\",\"customer_data\":{\"legal_id\":\"1234567890\",\"full_name\":\"Juan Alfonso Pérez Rodríguez\",\"phone_number\":\"573307654321\",\"legal_id_type\":\"CC\"},\"currency\":\"COP\",\"accept_personal_auth\":\"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6Mzc1LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLWFkbWluaXN0cmFjaW9uLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiOTVkYzcwN2M0M2UxYmViMDAwMDUyZDNkNWJhZThhMDAiLCJqaXQiOiIxNzM1MjM5Mzk2LTIyNzgyIiwiZW1haWwiOiIifQ.3TufVY6ilTYeCBTSkh9NHvsW9bZy9HAQSxc7APP3bas\",\"payment_method\":{\"payment_description\":\"Pago a Tienda Wompi\",\"type\":\"BANCOLOMBIA_QR\",\"sandbox_status\":\"APPROVED\"}}\n\n13:56:35.561 response time in milliseconds: 795\n1 < 422\n1 < Content-Type: application\/json\n1 < Content-Length: 94\n1 < Connection: keep-alive\n1 < Date: Thu, 26 Dec 2024 18:56:36 GMT\n1 < vary: Origin\n1 < apigw-requestid: DacDvjD0IAMEbUw=\n1 < X-Cache: Error from cloudfront\n1 < Via: 1.1 cf3d1f97e96a04720e63ac8b1955ac3e.cloudfront.net (CloudFront)\n1 < X-Amz-Cf-Pop: MIA3-C3\n1 < X-Amz-Cf-Id: VV_2foYw4Y9o9B4rWGQqcDan2J4gj3J-g92afsILn9ct_bRi8Q5wbg==\n{\"error\":{\"messages\":{\"signature\":[\"La firma es inválida\"]},\"type\":\"INPUT_VALIDATION_ERROR\"}}\n"},{"result":{"nanos":80400,"errorMessage":"status code was: 422, expected: 201, response time in milliseconds: 795, url: https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions, response: \n{\"error\":{\"type\":\"INPUT_VALIDATION_ERROR\",\"messages\":{\"signature\":[\"La firma es inválida\"]}}}\nsrc\/test\/resources\/karate\/transactions\/transactions.feature:115","millis":0.0804,"status":"failed"},"step":{"line":115,"prefix":"Then","index":12,"text":"status 201"},"stepLog":"13:56:35.562 src\/test\/resources\/karate\/transactions\/transactions.feature:115\nThen status 201\nstatus code was: 422, expected: 201, response time in milliseconds: 795, url: https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions, response: \n{\"error\":{\"type\":\"INPUT_VALIDATION_ERROR\",\"messages\":{\"signature\":[\"La firma es inválida\"]}}}\nsrc\/test\/resources\/karate\/transactions\/transactions.feature:115\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":116,"prefix":"And","index":13,"text":"match response.data.payment_method_type == 'BANCOLOMBIA_QR'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":117,"prefix":"And","index":14,"text":"match response.data.amount_in_cents == 150000"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":118,"prefix":"And","index":15,"text":"match response.data.currency == 'COP'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":119,"prefix":"And","index":16,"text":"match response.data.payment_method.sandbox_status == 'APPROVED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":120,"prefix":"And","index":17,"text":"match response.data.reference == reference"}}],"line":123,"description":"","durationMillis":1150.279,"failed":true,"error":"status code was: 422, expected: 201, response time in milliseconds: 795, url: https:\/\/api-sandbox.co.uat.wompi.dev\/v1\/transactions, response: \n{\"error\":{\"type\":\"INPUT_VALIDATION_ERROR\",\"messages\":{\"signature\":[\"La firma es inválida\"]}}}\nsrc\/test\/resources\/karate\/transactions\/transactions.feature:115","tags":["FailedTransactionReference"],"executorName":"main","name":"Transaccion exitosa por Bancolombia QR","startTime":1735239394409,"refId":"[5.1:123]","endTime":1735239395562,"exampleData":{"amount":"150000","currency":"'COP'","reference":"reference","paymentMethod":"BANCOLOMBIA_QR","status":"APPROVED"},"exampleIndex":0}],"callDepth":0,"name":"Realizar una transaccion","description":"","resultDate":"2024-12-26 01:56:35 p. m.","durationMillis":4476.4138,"passedCount":2}